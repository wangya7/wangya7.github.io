<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>åŠè¾²</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://bannong.wang/"/>
  <updated>2020-12-03T14:06:49.724Z</updated>
  <id>http://bannong.wang/</id>
  
  <author>
    <name>åŠè¾²</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Dubbo-SPI&amp;è‡ªé€‚åº”çš„æ‰©å±•æœºåˆ¶</title>
    <link href="http://bannong.wang/2020/12/03/Dubbo-SPI/"/>
    <id>http://bannong.wang/2020/12/03/Dubbo-SPI/</id>
    <published>2020-12-03T13:51:44.000Z</published>
    <updated>2020-12-03T14:06:49.724Z</updated>
    
    <content type="html"><![CDATA[<p><strong>META-INF/services</strong> ã€<strong>ServiceLoader</strong><br>JDKçš„SPIæ˜¯ä¸€ç§æœåŠ¡å‘ç°æœºåˆ¶ã€‚SPIå°†æ¥å£çš„å®ç°ç±»å…¨é™å®šåé…ç½®åœ¨æ–‡ä»¶ä¸­ï¼Œç”±æœåŠ¡åŠ è½½å™¨è¯»å–é…ç½®æ–‡ä»¶ï¼ŒåŠ è½½å®ç°ç±»ï¼Œè¿™æ ·å¯ä»¥åœ¨è¿è¡ŒæœŸé—´åŠ¨æ€çš„æ›¿æ¢å®ç°ç±»ã€‚<br>Dubboå®ç°äº†å¢å¼ºçš„SPIæœºåˆ¶ã€‚Dubboçš„SPIç›¸å…³é€»è¾‘è¢«å°è£…åœ¨ExtensionLoaderä¸­ï¼Œé€šè¿‡å…¶åŠ è½½æŒ‡å®šçš„å®ç°ç±»ã€‚ç›¸æ¯”äºJDKçš„è·¯å¾„ï¼ŒDubboå°†é…ç½®æ–‡ä»¶æ”¾ç½®åœ¨META-INF/dubbo è·¯å¾„ä¸‹ï¼ŒåŒæ—¶é‡‡ç”¨äº†é”®å€¼å¯¹çš„å½¢å¼ã€‚</p><p><a href="http://dubbo.apache.org/zh-cn/docs/source_code_guide/adaptive-extension.html" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p><p>SPIå’ŒDubboçš„è‡ªé€‚åº”çš„æ‰©å±•æœºåˆ¶å¿…é¡»æ”¾åœ¨ä¸€èµ·è¯´ï¼Œåˆ†ä¸å¼€çš„ã€‚<br>ä¸»è¦åˆ†æ com.alibaba.dubbo.common.extension.ExtensionLoader</p><h3 id="case-1-ExtensionLoaderTest-robotTest"><a href="#case-1-ExtensionLoaderTest-robotTest" class="headerlink" title="case 1.ExtensionLoaderTest.robotTest"></a>case 1.ExtensionLoaderTest.robotTest</h3><h4 id="ä¸€ã€åˆå§‹åŒ–typeå¯¹åº”ExtensionLoaderå¯¹è±¡çš„objectFactoryæˆå‘˜å˜é‡"><a href="#ä¸€ã€åˆå§‹åŒ–typeå¯¹åº”ExtensionLoaderå¯¹è±¡çš„objectFactoryæˆå‘˜å˜é‡" class="headerlink" title="ä¸€ã€åˆå§‹åŒ–typeå¯¹åº”ExtensionLoaderå¯¹è±¡çš„objectFactoryæˆå‘˜å˜é‡"></a>ä¸€ã€åˆå§‹åŒ–typeå¯¹åº”ExtensionLoaderå¯¹è±¡çš„objectFactoryæˆå‘˜å˜é‡</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ExtensionLoader&lt;Robot&gt; extensionLoader = ExtensionLoader.getExtensionLoader(Robot<span class="class">.<span class="keyword">class</span>)</span>;</span><br></pre></td></tr></table></figure><p>åŸºç¡€çš„åŒºåˆ«äºjdkçš„SPIåŠ è½½å®è·µ<br>é€šè¿‡ ExtensionLoader.getExtensionLoader(Robot.class); è¿™è¡Œä»£ç å°±å¿…é¡»èµ°åˆ° new ExtensionLoader<T>(type)ã€‚<br>å…¶å®è¿™1è¡Œä»£ç å°±æ˜¯è¯´åˆå§‹åŒ– ExtensionFactory çš„å®ç°ï¼Œé»˜è®¤æ˜¯é¦–å…ˆåŠ è½½ ExtensionFactory.class ç„¶åè°ƒç”¨äº† getAdaptiveExtension()è·å–è‡ªé€‚åº”æ‹“å±•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">com.alibaba.dubbo.common.extension.ExtensionLoader.createAdaptiveExtension</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•å°±æ˜¯æ ¸å¿ƒéœ€è¦ç†è§£çš„å•¦ã€‚</p><ol><li>è°ƒç”¨ getAdaptiveExtensionClass æ–¹æ³•è·å–è‡ªé€‚åº”æ‹“å±• Class å¯¹è±¡</li><li>é€šè¿‡åå°„è¿›è¡Œå®ä¾‹åŒ–</li><li>è°ƒç”¨ injectExtension æ–¹æ³•å‘æ‹“å±•å®ä¾‹ä¸­æ³¨å…¥ä¾èµ–<br>æ¯ä¸ªæ­¥éª¤é‡Œé¢åˆç»†åˆ†ï¼Œå°¤å…¶æ˜¯ç¬¬ä¸€æ­¥æ¯”è¾ƒç²¾å½©ï¼è¿™é‡Œé¢æŠŠç¬¬1æ­¥æ‹¿å‡ºæ¥è¯´ä¸€ä¸‹ã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1. è°ƒç”¨ getExtensionClasses è·å–æ‰€æœ‰çš„æ‹“å±•ç±»</span></span><br><span class="line"><span class="comment"> * 2. æ£€æŸ¥ç¼“å­˜ï¼Œè‹¥ç¼“å­˜ä¸ä¸ºç©ºï¼Œåˆ™è¿”å›ç¼“å­˜</span></span><br><span class="line"><span class="comment"> * 3. è‹¥ç¼“å­˜ä¸ºç©ºï¼Œåˆ™è°ƒç”¨ createAdaptiveExtensionClass åˆ›å»ºè‡ªé€‚åº”æ‹“å±•ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * é¦–å…ˆä»ç¬¬ä¸€ä¸ªé€»è¾‘è¯´èµ·ï¼ŒgetExtensionClasses è¿™ä¸ªæ–¹æ³•ç”¨äºè·å–æŸä¸ªæ¥å£çš„æ‰€æœ‰å®ç°ç±»ã€‚æ¯”å¦‚è¯¥æ–¹æ³•å¯ä»¥è·å–</span></span><br><span class="line"><span class="comment"> * Protocol æ¥å£çš„ DubboProtocolã€HttpProtocolã€InjvmProtocol ç­‰å®ç°ç±»ã€‚åœ¨è·å–å®ç°ç±»çš„è¿‡ç¨‹ä¸­ï¼Œ</span></span><br><span class="line"><span class="comment"> * å¦‚æœæŸä¸ªå®ç°ç±»è¢« Adaptive æ³¨è§£ä¿®é¥°äº†ï¼Œé‚£ä¹ˆè¯¥ç±»å°±ä¼šè¢«èµ‹å€¼ç»™ cachedAdaptiveClass å˜é‡ã€‚æ­¤æ—¶ï¼Œä¸Šé¢æ­¥</span></span><br><span class="line"><span class="comment"> * éª¤ä¸­çš„ç¬¬äºŒæ­¥æ¡ä»¶æˆç«‹ï¼ˆç¼“å­˜ä¸ä¸ºç©ºï¼‰ï¼Œç›´æ¥è¿”å› cachedAdaptiveClass å³å¯ã€‚å¦‚æœæ‰€æœ‰çš„å®ç°ç±»å‡æœªè¢«</span></span><br><span class="line"><span class="comment"> * Adaptive æ³¨è§£ä¿®é¥°ï¼Œé‚£ä¹ˆæ‰§è¡Œç¬¬ä¸‰æ­¥é€»è¾‘ï¼Œåˆ›å»ºè‡ªé€‚åº”æ‹“å±•ç±»ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> Class&lt;?&gt; getAdaptiveExtensionClass() &#123;</span><br><span class="line">    <span class="comment">// é€šè¿‡ SPI è·å–æ‰€æœ‰çš„æ‹“å±•ç±»</span></span><br><span class="line">    getExtensionClasses();</span><br><span class="line">    <span class="keyword">if</span> (cachedAdaptiveClass != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> cachedAdaptiveClass;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ›å»ºè‡ªé€‚åº”æ‹“å±•ç±»</span></span><br><span class="line">    <span class="keyword">return</span> cachedAdaptiveClass = createAdaptiveExtensionClass();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>è¿è¡Œä»£ç çš„æ—¶å€™ï¼Œä¼šå‘ç° ExtensionFactory åŒ…å«ä¸¤ä¸ªå®ç°ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªè¢« @Adaptive ä¿®é¥°çš„ AdaptiveExtensionFactoryï¼Œå…¶å®è¿™ä¸ªåœ¨getExtensionClasseså†…éƒ¨ä¼šåˆå§‹åŒ–èµ‹å€¼ç»™cachedAdaptiveClassï¼Œæ‰€ä»¥return cachedAdaptiveClass;ç›´æ¥è¿”å›å•¦ã€‚</li></ol><h4 id="äºŒã€typeå¯¹åº”ExtensionLoaderå¯¹è±¡è·å–å¯¹åº”åç§°çš„å®ä¾‹å¯¹è±¡"><a href="#äºŒã€typeå¯¹åº”ExtensionLoaderå¯¹è±¡è·å–å¯¹åº”åç§°çš„å®ä¾‹å¯¹è±¡" class="headerlink" title="äºŒã€typeå¯¹åº”ExtensionLoaderå¯¹è±¡è·å–å¯¹åº”åç§°çš„å®ä¾‹å¯¹è±¡"></a>äºŒã€typeå¯¹åº”ExtensionLoaderå¯¹è±¡è·å–å¯¹åº”åç§°çš„å®ä¾‹å¯¹è±¡</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Robot optimusPrime = extensionLoader.getExtension(<span class="string">"optimusPrime"</span>);</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå°±æ²¡æœ‰å•¥å­è¯´çš„å•¦ï¼Œè‡ªå·±è¿½ä»£ç </p><p>ç¬¬1ä¸ªcaseå°±æ˜¯é€šè¿‡ Class.forName åŠ è½½   æ²¡å•¥å¥½è¯´çš„</p><p>dubboé€šè¿‡è‡ªå®ç°çš„SPIæ¥å®ç°æ‰©å±•ï¼Œé…ç½®åˆ‡æ¢ã€‚ æ¯”å¦‚Protocolã€Clusterã€LoadBalance ç­‰ã€‚å½“æŸäº›æ‰©å±•ä¸æƒ³åœ¨æ¡†æ¶å¯åŠ¨æ—¶å€™åŠ è½½ï¼Œ<br>è€Œå¸Œæœ›æ‰©å±•æ–¹æ³•æ¡ç”¨çš„æ—¶å€™ï¼Œæ ¹æ®è¿è¡Œæ—¶å‚æ•°è¿›è¡ŒåŠ è½½ã€‚  â€”â€” æ‰©å±•æœªåŠ è½½ï¼Œéš¾é“å¯ä»¥ä½¿ç”¨æ‰©å±•çš„æ–¹æ³•ï¼Ÿ<br>dubboé€šè¿‡è‡ªé€‚åº”æ‹“å±•æœºåˆ¶å¾ˆå¥½çš„è§£å†³äº†ï¼Œdubbo ä¼šä¸ºæ‹“å±•æ¥å£ç”Ÿæˆå…·æœ‰ä»£ç†åŠŸèƒ½çš„ä»£ç ï¼Œç„¶åé€šè¿‡ javassist æˆ– jdk ç¼–è¯‘è¿™æ®µ<br>ä»£ç å¾—åˆ°Classç±»ï¼Œæœ€åå†é€šè¿‡åå°„åˆ›å»ºä»£ç†ç±»ã€‚</p><p>@Adaptiveç”¨åœ¨ç±»ä¸Šé¢ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯æ˜¾ç°ç±»ä½¿ç”¨ï¼Œè¿™ä¸ªå®ç°ç±»å°±æ˜¯è¿™ä¸ªæ¥å£çš„é»˜è®¤å®ç°ï¼ˆæ¯”å¦‚ä¸Šé¢è¯´çš„ AdaptiveExtensionFactoryï¼‰ï¼›ä½†æ˜¯è¿™ä¸ªæ³¨è§£å¤šæ•°ä½¿ç”¨åœ¨æ–¹æ³•ä¸Šã€‚</p><h3 id="case-2-ExtensionLoader-Adaptive-Test-test-getAdaptiveExtension-inject"><a href="#case-2-ExtensionLoader-Adaptive-Test-test-getAdaptiveExtension-inject" class="headerlink" title="case 2.ExtensionLoader_Adaptive_Test.test_getAdaptiveExtension_inject"></a>case 2.ExtensionLoader_Adaptive_Test.test_getAdaptiveExtension_inject</h3><p>è‡ªé€‚åº”åŠ è½½æµ‹è¯•<br>å°¤å…¶éœ€è¦æ³¨æ„ urlå¢åŠ å‚æ•°çš„keyå’Œvalueã€‚è¿™éœ€è¦å’Œåˆ›å»ºè‡ªé€‚åº”çš„ä»£ç†ä»£ç æœ‰å…³ç³»ï¼Œå‚è€ƒè¿™ä¸ªæ–¹æ³•ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">com.alibaba.dubbo.common.extension.ExtensionLoader.createAdaptiveExtensionClassCode</span><br></pre></td></tr></table></figure><p>å…¶å®å…¥å£ä¹Ÿæ˜¯ä¸Šé¢çš„createAdaptiveExtensionï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸Šé¢æ²¡æœ‰èµ°åˆ° createAdaptiveExtensionClassCode æ–¹æ³•å‘¢ï¼Ÿâ€”â€”â€”â€”æ˜¯å› ä¸ºä¸Šé¢çš„ ExtensionFactory çš„å®ç°ç±» AdaptiveExtensionFactory è¢« @Adaptive æ ‡æ³¨å•¦ã€‚</p><p>ä¸‹é¢å†é‡æ¸©è¿™æ®µä»£ç å§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1. è°ƒç”¨ getAdaptiveExtensionClass æ–¹æ³•è·å–è‡ªé€‚åº”æ‹“å±• Class å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * 2. é€šè¿‡åå°„è¿›è¡Œå®ä¾‹åŒ–</span></span><br><span class="line"><span class="comment"> * 3. è°ƒç”¨ injectExtension æ–¹æ³•å‘æ‹“å±•å®ä¾‹ä¸­æ³¨å…¥ä¾èµ–</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line"><span class="function"><span class="keyword">private</span> T <span class="title">createAdaptiveExtension</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> injectExtension((T) getAdaptiveExtensionClass().newInstance());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"Can not create adaptive extension "</span> + type + <span class="string">", cause: "</span> + e.getMessage(), e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1. è°ƒç”¨ getExtensionClasses è·å–æ‰€æœ‰çš„æ‹“å±•ç±»</span></span><br><span class="line"><span class="comment"> * 2. æ£€æŸ¥ç¼“å­˜ï¼Œè‹¥ç¼“å­˜ä¸ä¸ºç©ºï¼Œåˆ™è¿”å›ç¼“å­˜</span></span><br><span class="line"><span class="comment"> * 3. è‹¥ç¼“å­˜ä¸ºç©ºï¼Œåˆ™è°ƒç”¨ createAdaptiveExtensionClass åˆ›å»ºè‡ªé€‚åº”æ‹“å±•ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * é¦–å…ˆä»ç¬¬ä¸€ä¸ªé€»è¾‘è¯´èµ·ï¼ŒgetExtensionClasses è¿™ä¸ªæ–¹æ³•ç”¨äºè·å–æŸä¸ªæ¥å£çš„æ‰€æœ‰å®ç°ç±»ã€‚æ¯”å¦‚è¯¥æ–¹æ³•å¯ä»¥è·å–</span></span><br><span class="line"><span class="comment"> * Protocol æ¥å£çš„ DubboProtocolã€HttpProtocolã€InjvmProtocol ç­‰å®ç°ç±»ã€‚åœ¨è·å–å®ç°ç±»çš„è¿‡ç¨‹ä¸­ï¼Œ</span></span><br><span class="line"><span class="comment"> * å¦‚æœæŸä¸ªå®ç°ç±»è¢« Adaptive æ³¨è§£ä¿®é¥°äº†ï¼Œé‚£ä¹ˆè¯¥ç±»å°±ä¼šè¢«èµ‹å€¼ç»™ cachedAdaptiveClass å˜é‡ã€‚æ­¤æ—¶ï¼Œä¸Šé¢æ­¥</span></span><br><span class="line"><span class="comment"> * éª¤ä¸­çš„ç¬¬äºŒæ­¥æ¡ä»¶æˆç«‹ï¼ˆç¼“å­˜ä¸ä¸ºç©ºï¼‰ï¼Œç›´æ¥è¿”å› cachedAdaptiveClass å³å¯ã€‚å¦‚æœæ‰€æœ‰çš„å®ç°ç±»å‡æœªè¢«</span></span><br><span class="line"><span class="comment"> * Adaptive æ³¨è§£ä¿®é¥°ï¼Œé‚£ä¹ˆæ‰§è¡Œç¬¬ä¸‰æ­¥é€»è¾‘ï¼Œåˆ›å»ºè‡ªé€‚åº”æ‹“å±•ç±»ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> Class&lt;?&gt; getAdaptiveExtensionClass() &#123;</span><br><span class="line">    <span class="comment">// é€šè¿‡ SPI è·å–æ‰€æœ‰çš„æ‹“å±•ç±»</span></span><br><span class="line">    getExtensionClasses();</span><br><span class="line">    <span class="keyword">if</span> (cachedAdaptiveClass != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> cachedAdaptiveClass;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ›å»ºè‡ªé€‚åº”æ‹“å±•ç±»</span></span><br><span class="line">    <span class="keyword">return</span> cachedAdaptiveClass = createAdaptiveExtensionClass();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Class&lt;?&gt; createAdaptiveExtensionClass() &#123;</span><br><span class="line">    <span class="comment">// æ„å»ºè‡ªé€‚åº”æ‹“å±•ä»£ç </span></span><br><span class="line">    String code = createAdaptiveExtensionClassCode();</span><br><span class="line">    ClassLoader classLoader = findClassLoader();</span><br><span class="line">    <span class="comment">// è·å–ç¼–è¯‘å™¨å®ç°ç±»</span></span><br><span class="line">    com.alibaba.dubbo.common.compiler.Compiler compiler = ExtensionLoader.getExtensionLoader(com.alibaba.dubbo.common.compiler.Compiler<span class="class">.<span class="keyword">class</span>).<span class="title">getAdaptiveExtension</span>()</span>;</span><br><span class="line">    <span class="comment">// ç¼–è¯‘ä»£ç ï¼Œç”Ÿæˆ Class</span></span><br><span class="line">    <span class="keyword">return</span> compiler.compile(code, classLoader);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * çœ‹å®Œè¿™æ®µä»£ç å°±ç‚¹æ¯ å–œèŒ¶</span></span><br><span class="line"><span class="comment"> * å…¶å®å¾ˆç®€å•  æ‰¾ä¸ªæ¡ˆä¾‹è·‘ä¸€ä¸‹   æ¯”å¦‚ com.alibaba.dubbo.remoting.Transporter  æˆ–è€…  com.alibaba.dubbo.rpc.Protocol</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * é»˜è®¤ç”Ÿæˆä¸€ä¸ªä»£ç†ç±»çš„å­—ç¬¦ä¸²ç¼–ç  &#123;name&#125;$Adaptive</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">createAdaptiveExtensionClassCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="comment">//...çœç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="case-3-ExtensionLoader-Adaptive-Test-test-getAdaptiveExtension-customizeAdaptiveKey"><a href="#case-3-ExtensionLoader-Adaptive-Test-test-getAdaptiveExtension-customizeAdaptiveKey" class="headerlink" title="case 3.ExtensionLoader_Adaptive_Test.test_getAdaptiveExtension_customizeAdaptiveKey"></a>case 3.ExtensionLoader_Adaptive_Test.test_getAdaptiveExtension_customizeAdaptiveKey</h3><p>äº†è§£åŠ è½½å‚æ•°çš„æ ·å¼</p><blockquote><p>è¡¥å……ä¸€å¥ï¼Œè¿™é‡Œå°±å¯ä»¥çœ‹å‡ºæ¥URLçš„ä½œç”¨ ç›¸å½“äºæ•°æ®æ€»çº¿ ç©¿æ’åœ¨å„ä¸ªåŠŸèƒ½ç‚¹ é€šè¿‡å…¶ç»‘å®šç»‘å®šé…ç½®ä¿¡æ¯</p></blockquote><h3 id="æ€»ç»“ä¸€ä¸‹-å¯ä»¥å€Ÿé‰´çš„åœ°æ–¹å°±æ˜¯-åŠ¨æ€ç”Ÿæˆä»£ç†ç±»ç«Ÿç„¶å¯ä»¥è¿™ä¹ˆç©ï¼Œæœ‰ç‚¹éªšï¼"><a href="#æ€»ç»“ä¸€ä¸‹-å¯ä»¥å€Ÿé‰´çš„åœ°æ–¹å°±æ˜¯-åŠ¨æ€ç”Ÿæˆä»£ç†ç±»ç«Ÿç„¶å¯ä»¥è¿™ä¹ˆç©ï¼Œæœ‰ç‚¹éªšï¼" class="headerlink" title="æ€»ç»“ä¸€ä¸‹ å¯ä»¥å€Ÿé‰´çš„åœ°æ–¹å°±æ˜¯ åŠ¨æ€ç”Ÿæˆä»£ç†ç±»ç«Ÿç„¶å¯ä»¥è¿™ä¹ˆç©ï¼Œæœ‰ç‚¹éªšï¼"></a>æ€»ç»“ä¸€ä¸‹ å¯ä»¥å€Ÿé‰´çš„åœ°æ–¹å°±æ˜¯ åŠ¨æ€ç”Ÿæˆä»£ç†ç±»ç«Ÿç„¶å¯ä»¥è¿™ä¹ˆç©ï¼Œæœ‰ç‚¹éªšï¼</h3>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;strong&gt;META-INF/services&lt;/strong&gt; ã€&lt;strong&gt;ServiceLoader&lt;/strong&gt;&lt;br&gt;JDKçš„SPIæ˜¯ä¸€ç§æœåŠ¡å‘ç°æœºåˆ¶ã€‚SPIå°†æ¥å£çš„å®ç°ç±»å…¨é™å®šåé…ç½®åœ¨æ–‡ä»¶ä¸­ï¼Œç”±æœåŠ¡åŠ è½½å™¨è¯»å–é…ç½®æ–‡ä»¶ï¼ŒåŠ è½½å®ç°ç±»ï¼Œè¿™æ ·å¯ä»¥åœ¨è¿è¡ŒæœŸé—´åŠ¨
      
    
    </summary>
    
    
    
      <category term="Dubbo" scheme="http://bannong.wang/tags/Dubbo/"/>
    
      <category term="Java" scheme="http://bannong.wang/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>ä¸ªäººåšå®¢æ­å»º</title>
    <link href="http://bannong.wang/2020/06/18/Blog/"/>
    <id>http://bannong.wang/2020/06/18/Blog/</id>
    <published>2020-06-18T08:31:44.753Z</published>
    <updated>2020-12-03T13:44:37.006Z</updated>
    
    <content type="html"><![CDATA[<p>ğŸ“°æœ¬åšå®¢é‡‡ç”¨<a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>ï¼Œèµ„æºç›´æ¥æ‰˜ç®¡åœ¨<a href="https://github.com/" target="_blank" rel="noopener">Github</a>ã€‚<br>âš™ï¸å…³äºå¦‚æœæ“ä½œï¼ŒHexoå·²ç»æä¾›æ–‡æ¡£ï¼Œè‡ªå·±æœç´¢ğŸ”ä¹Ÿè¡Œï¼Œè¿™é¢æ¨ècofessä¸»é¢˜ä½œè€…çš„<a href="https://blog.cofess.com/2017/04/09/hexo-builds-a-personal-blog-and-deploys-to-github.html" target="_blank" rel="noopener">ä¸€ç¯‡æ–‡ç« </a>ã€‚</p><h3 id="å¤‡å¿˜å…³é”®æ“ä½œ"><a href="#å¤‡å¿˜å…³é”®æ“ä½œ" class="headerlink" title="å¤‡å¿˜å…³é”®æ“ä½œ"></a>å¤‡å¿˜å…³é”®æ“ä½œ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo new "æˆ‘çš„åšå®¢"</span></span><br><span class="line">$ hexo n <span class="string">"æˆ‘çš„åšå®¢"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># clean</span></span><br><span class="line">$ hexo clean</span><br><span class="line"></span><br><span class="line"><span class="comment"># hexo generate ç”Ÿæˆé™æ€é¡µé¢</span></span><br><span class="line">$ hexo g</span><br><span class="line"></span><br><span class="line"><span class="comment"># hexo server å¯åŠ¨æœåŠ¡é¢„è§ˆ</span></span><br><span class="line">$ hexo s</span><br><span class="line"></span><br><span class="line"><span class="comment"># hexo deploy éƒ¨ç½²</span></span><br><span class="line">$ hexo d</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ğŸ“°æœ¬åšå®¢é‡‡ç”¨&lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;ï¼Œèµ„æºç›´æ¥æ‰˜ç®¡åœ¨&lt;a href=&quot;https://github.com/&quot; target=&quot;_blank&quot; rel=&quot;noope
      
    
    </summary>
    
    
    
  </entry>
  
</feed>
