<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>åŠè¾²</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://bannong.wang/"/>
  <updated>2020-12-06T08:13:08.215Z</updated>
  <id>http://bannong.wang/</id>
  
  <author>
    <name>åŠè¾²</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Dubbo-SPI&amp;è‡ªé€‚åº”çš„æ‰©å±•æœºåˆ¶</title>
    <link href="http://bannong.wang/2020/12/03/Dubbo-SPI/"/>
    <id>http://bannong.wang/2020/12/03/Dubbo-SPI/</id>
    <published>2020-12-03T13:51:44.000Z</published>
    <updated>2020-12-06T08:13:08.215Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://dubbo.apache.org/zh/docs/v2.7/dev/source/adaptive-extension/" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£-SPI è‡ªé€‚åº”æ‹“å±•</a></p><blockquote><p>æ¨èé˜…è¯»å®˜æ–¹æ–‡æ¡£</p></blockquote><p>JDKçš„SPIæ˜¯ä¸€ç§æœåŠ¡å‘ç°æœºåˆ¶ã€‚SPIå°†æ¥å£çš„å®ç°ç±»å…¨é™å®šåé…ç½®åœ¨æ–‡ä»¶ä¸­ï¼Œç”±æœåŠ¡åŠ è½½å™¨è¯»å–é…ç½®æ–‡ä»¶ï¼ŒåŠ è½½å®ç°ç±»ï¼Œè¿™æ ·å¯ä»¥åœ¨è¿è¡ŒæœŸé—´åŠ¨æ€çš„æ›¿æ¢å®ç°ç±»ã€‚é»˜è®¤çš„åŠ è½½è·¯å¾„ä¸º<strong>META-INF/services</strong>ï¼Œé€šè¿‡<strong>ServiceLoader</strong>å®ç°åŠ è½½ã€‚<br>Dubboå®ç°äº†å¢å¼ºçš„SPIæœºåˆ¶ã€‚Dubboçš„SPIç›¸å…³é€»è¾‘è¢«å°è£…åœ¨ExtensionLoaderä¸­ï¼Œé€šè¿‡å…¶åŠ è½½æŒ‡å®šçš„å®ç°ç±»ã€‚ç›¸æ¯”äºJDKçš„è·¯å¾„ï¼ŒDubboå°†é…ç½®æ–‡ä»¶æ”¾ç½®åœ¨META-INF/dubboä¸»è·¯å¾„ä¸‹ï¼ŒåŒæ—¶é‡‡ç”¨äº†é”®å€¼å¯¹çš„å½¢å¼ã€‚</p><p>ä¸»è¦åˆ†æ com.alibaba.dubbo.common.extension.ExtensionLoader</p><h4 id="Case-1"><a href="#Case-1" class="headerlink" title="Case-1"></a>Case-1</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>    <span class="meta">@Test</span></span><br><span class="line"><span class="number">2</span>    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">robotTest</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="number">3</span>        ExtensionLoader&lt;Robot&gt; extensionLoader = ExtensionLoader.getExtensionLoader(Robot<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"><span class="number">4</span>        Robot optimusPrime = extensionLoader.getExtension(<span class="string">"optimusPrime"</span>);</span><br><span class="line"><span class="number">5</span>        optimusPrime.hi();</span><br><span class="line"><span class="number">6</span></span><br><span class="line"><span class="number">7</span>        Robot bumblebee = extensionLoader.getExtension(<span class="string">"bumblebee"</span>);</span><br><span class="line"><span class="number">8</span>        bumblebee.hi();</span><br><span class="line"><span class="number">9</span>    &#125;</span><br></pre></td></tr></table></figure><h5 id="â‘ åˆå§‹åŒ–typeå¯¹åº”ExtensionLoaderå¯¹è±¡çš„objectFactoryæˆå‘˜å˜é‡"><a href="#â‘ åˆå§‹åŒ–typeå¯¹åº”ExtensionLoaderå¯¹è±¡çš„objectFactoryæˆå‘˜å˜é‡" class="headerlink" title="â‘ åˆå§‹åŒ–typeå¯¹åº”ExtensionLoaderå¯¹è±¡çš„objectFactoryæˆå‘˜å˜é‡"></a>â‘ åˆå§‹åŒ–typeå¯¹åº”ExtensionLoaderå¯¹è±¡çš„objectFactoryæˆå‘˜å˜é‡</h5><p>1è¡Œä»£ç é€šè¿‡ ExtensionLoader.getExtensionLoader(Robot.class); è¿™è¡Œä»£ç å°±å¿…é¡»èµ°åˆ° new ExtensionLoader<T>(type)ã€‚<br>å…¶å®è¿™1è¡Œä»£ç å°±æ˜¯è¯´åˆå§‹åŒ– ExtensionFactory çš„å®ç°ï¼Œé»˜è®¤æ˜¯é¦–å…ˆåŠ è½½ ExtensionFactory.class ç„¶åè°ƒç”¨äº† getAdaptiveExtension()è·å–è‡ªé€‚åº”æ‹“å±•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">com.alibaba.dubbo.common.extension.ExtensionLoader.createAdaptiveExtension</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•å°±æ˜¯æ ¸å¿ƒéœ€è¦ç†è§£çš„å•¦ã€‚</p><ol><li>è°ƒç”¨ getAdaptiveExtensionClass æ–¹æ³•è·å–è‡ªé€‚åº”æ‹“å±• Class å¯¹è±¡</li><li>é€šè¿‡åå°„è¿›è¡Œå®ä¾‹åŒ–</li><li>è°ƒç”¨ injectExtension æ–¹æ³•å‘æ‹“å±•å®ä¾‹ä¸­æ³¨å…¥ä¾èµ–<br>æ¯ä¸ªæ­¥éª¤é‡Œé¢åˆç»†åˆ†ï¼Œå°¤å…¶æ˜¯ç¬¬ä¸€æ­¥æ¯”è¾ƒç²¾å½©ï¼è¿™é‡Œé¢æŠŠç¬¬1æ­¥æ‹¿å‡ºæ¥è¯´ä¸€ä¸‹ã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1. è°ƒç”¨ getExtensionClasses è·å–æ‰€æœ‰çš„æ‹“å±•ç±»</span></span><br><span class="line"><span class="comment"> * 2. æ£€æŸ¥ç¼“å­˜ï¼Œè‹¥ç¼“å­˜ä¸ä¸ºç©ºï¼Œåˆ™è¿”å›ç¼“å­˜</span></span><br><span class="line"><span class="comment"> * 3. è‹¥ç¼“å­˜ä¸ºç©ºï¼Œåˆ™è°ƒç”¨ createAdaptiveExtensionClass åˆ›å»ºè‡ªé€‚åº”æ‹“å±•ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * é¦–å…ˆä»ç¬¬ä¸€ä¸ªé€»è¾‘è¯´èµ·ï¼ŒgetExtensionClasses è¿™ä¸ªæ–¹æ³•ç”¨äºè·å–æŸä¸ªæ¥å£çš„æ‰€æœ‰å®ç°ç±»ã€‚æ¯”å¦‚è¯¥æ–¹æ³•å¯ä»¥è·å–</span></span><br><span class="line"><span class="comment"> * Protocol æ¥å£çš„ DubboProtocolã€HttpProtocolã€InjvmProtocol ç­‰å®ç°ç±»ã€‚åœ¨è·å–å®ç°ç±»çš„è¿‡ç¨‹ä¸­ï¼Œ</span></span><br><span class="line"><span class="comment"> * å¦‚æœæŸä¸ªå®ç°ç±»è¢« Adaptive æ³¨è§£ä¿®é¥°äº†ï¼Œé‚£ä¹ˆè¯¥ç±»å°±ä¼šè¢«èµ‹å€¼ç»™ cachedAdaptiveClass å˜é‡ã€‚æ­¤æ—¶ï¼Œä¸Šé¢æ­¥</span></span><br><span class="line"><span class="comment"> * éª¤ä¸­çš„ç¬¬äºŒæ­¥æ¡ä»¶æˆç«‹ï¼ˆç¼“å­˜ä¸ä¸ºç©ºï¼‰ï¼Œç›´æ¥è¿”å› cachedAdaptiveClass å³å¯ã€‚å¦‚æœæ‰€æœ‰çš„å®ç°ç±»å‡æœªè¢«</span></span><br><span class="line"><span class="comment"> * Adaptive æ³¨è§£ä¿®é¥°ï¼Œé‚£ä¹ˆæ‰§è¡Œç¬¬ä¸‰æ­¥é€»è¾‘ï¼Œåˆ›å»ºè‡ªé€‚åº”æ‹“å±•ç±»ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> Class&lt;?&gt; getAdaptiveExtensionClass() &#123;</span><br><span class="line">    <span class="comment">// é€šè¿‡ SPI è·å–æ‰€æœ‰çš„æ‹“å±•ç±»</span></span><br><span class="line">    getExtensionClasses();</span><br><span class="line">    <span class="keyword">if</span> (cachedAdaptiveClass != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> cachedAdaptiveClass;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ›å»ºè‡ªé€‚åº”æ‹“å±•ç±»</span></span><br><span class="line">    <span class="keyword">return</span> cachedAdaptiveClass = createAdaptiveExtensionClass();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>è¿è¡Œä»£ç çš„æ—¶å€™ï¼Œä¼šå‘ç° ExtensionFactory åŒ…å«ä¸¤ä¸ªå®ç°ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªè¢« @Adaptive ä¿®é¥°çš„ AdaptiveExtensionFactoryï¼Œå…¶å®è¿™ä¸ªåœ¨getExtensionClasseså†…éƒ¨ä¼šåˆå§‹åŒ–èµ‹å€¼ç»™cachedAdaptiveClassï¼Œæ‰€ä»¥return cachedAdaptiveClass;ç›´æ¥è¿”å›å•¦ã€‚</li></ol><h5 id="â‘¡typeå¯¹åº”ExtensionLoaderå¯¹è±¡è·å–å¯¹åº”åç§°æ‰€å¯¹åº”çš„å®ç°ç±»"><a href="#â‘¡typeå¯¹åº”ExtensionLoaderå¯¹è±¡è·å–å¯¹åº”åç§°æ‰€å¯¹åº”çš„å®ç°ç±»" class="headerlink" title="â‘¡typeå¯¹åº”ExtensionLoaderå¯¹è±¡è·å–å¯¹åº”åç§°æ‰€å¯¹åº”çš„å®ç°ç±»"></a>â‘¡typeå¯¹åº”ExtensionLoaderå¯¹è±¡è·å–å¯¹åº”åç§°æ‰€å¯¹åº”çš„å®ç°ç±»</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Robot optimusPrime = extensionLoader.getExtension(<span class="string">"optimusPrime"</span>);</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå°±æ²¡æœ‰å•¥å­è¯´çš„å•¦ï¼Œè‡ªå·±è¿½ä»£ç </p><p>ç¬¬1ä¸ªCaseå°±æ˜¯é€šè¿‡Class.forNameåŠ è½½ã€‚</p><p>dubboé€šè¿‡è‡ªå®ç°çš„SPIæ¥å®ç°æ‰©å±•ï¼Œé…ç½®åˆ‡æ¢ã€‚ æ¯”å¦‚Protocolã€Clusterã€LoadBalance ç­‰ã€‚å½“æŸäº›æ‰©å±•ä¸æƒ³åœ¨æ¡†æ¶å¯åŠ¨æ—¶å€™åŠ è½½ï¼Œ<br>è€Œå¸Œæœ›æ‰©å±•æ–¹æ³•æ¡ç”¨çš„æ—¶å€™ï¼Œæ ¹æ®è¿è¡Œæ—¶å‚æ•°è¿›è¡ŒåŠ è½½ã€‚  â€”â€” æ‰©å±•æœªåŠ è½½ï¼Œéš¾é“å¯ä»¥ä½¿ç”¨æ‰©å±•çš„æ–¹æ³•ï¼Ÿ<br>dubboé€šè¿‡è‡ªé€‚åº”æ‹“å±•æœºåˆ¶å¾ˆå¥½çš„è§£å†³äº†ï¼Œdubbo ä¼šä¸ºæ‹“å±•æ¥å£ç”Ÿæˆå…·æœ‰ä»£ç†åŠŸèƒ½çš„ä»£ç ï¼Œç„¶åé€šè¿‡ javassist æˆ– jdk ç¼–è¯‘è¿™æ®µ<br>ä»£ç å¾—åˆ°Classç±»ï¼Œæœ€åå†é€šè¿‡åå°„åˆ›å»ºä»£ç†ç±»ã€‚</p><p>@Adaptiveç”¨åœ¨ç±»ä¸Šé¢ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯æ˜¾ç°ç±»ä½¿ç”¨ï¼Œè¿™ä¸ªå®ç°ç±»å°±æ˜¯è¿™ä¸ªæ¥å£çš„é»˜è®¤å®ç°ï¼ˆæ¯”å¦‚ä¸Šé¢è¯´çš„ AdaptiveExtensionFactoryï¼‰ï¼›ä½†æ˜¯è¿™ä¸ªæ³¨è§£å¤šæ•°ä½¿ç”¨åœ¨æ–¹æ³•ä¸Šã€‚</p><h4 id="Case-2"><a href="#Case-2" class="headerlink" title="Case-2"></a>Case-2</h4><p>ä¸‹é¢çš„æµ‹è¯•å¼•ç”¨com.alibaba.dubbo.common.extensionloader.ExtensionLoader_Adaptive_Test#test_getAdaptiveExtension_injectï¼Œä¸ºäº†æ–¹ä¾¿é˜…è¯»æºç ï¼Œåšäº†ç¨å¾®çš„ä¿®æ”¹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> <span class="number">1</span>    <span class="meta">@Test</span></span><br><span class="line"> <span class="number">2</span>    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test_getAdaptiveExtension_inject</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"> <span class="number">3</span>        LogUtil.start();</span><br><span class="line"> <span class="number">4</span>        ExtensionLoader&lt;Ext6&gt; el = ExtensionLoader.getExtensionLoader(Ext6<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line"> <span class="number">5</span>        Ext6 ext = el.getAdaptiveExtension();</span><br><span class="line"> <span class="number">6</span></span><br><span class="line"> <span class="number">7</span>        URL url = <span class="keyword">new</span> URL(<span class="string">"p1"</span>, <span class="string">"1.2.3.4"</span>, <span class="number">1010</span>, <span class="string">"path1"</span>);</span><br><span class="line"> <span class="number">8</span>        url = url.addParameters(<span class="string">"ext6"</span>, <span class="string">"impl1"</span>);</span><br><span class="line"> <span class="number">9</span></span><br><span class="line"><span class="number">10</span>        String ans = ext.echo(url, <span class="string">"ha"</span>);</span><br><span class="line"><span class="number">11</span>        assertEquals(<span class="string">"Ext6Impl1-echo-Ext1Impl1-echo"</span>, ans);</span><br><span class="line"><span class="number">12</span></span><br><span class="line"><span class="number">13</span>        Assert.assertTrue(<span class="string">"can not find error."</span>, LogUtil.checkNoError());</span><br><span class="line"><span class="number">14</span>        LogUtil.stop();</span><br><span class="line"><span class="number">15</span></span><br><span class="line"><span class="number">16</span>        <span class="comment">// simple.ext å¯¹åº” SimpleExt</span></span><br><span class="line"><span class="number">17</span>        url = url.addParameters(<span class="string">"simple.ext"</span>, <span class="string">"impl2"</span>);</span><br><span class="line"><span class="number">18</span>        ans = ext.echo(url, <span class="string">"ha"</span>)</span><br><span class="line"><span class="number">19</span>        assertEquals(<span class="string">"Ext6Impl1-echo-Ext1Impl2-echo"</span>, ans);</span><br><span class="line"><span class="number">20</span></span><br><span class="line"><span class="number">21</span>    &#125;</span><br></pre></td></tr></table></figure><p>ç¬¬4è¡Œä»£ç å·²ç»åœ¨ä¸Šä¸ªcaseåˆ†æè¿‡å•¦ï¼Œç°åœ¨åˆ†æç¬¬5è¡Œè·å–ä¸€ä¸ªè‡ªé€‚åº”çš„æ‰©å±•ã€‚å…¶å®å…¥å£ä¹Ÿæ˜¯ç¬¬4è¡Œå¤„ç†ExtensionFactoryåŠ è½½éœ€è¦èµ°åˆ°çš„é€»è¾‘createAdaptiveExtensionï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¸Šé¢æ²¡æœ‰èµ°åˆ° createAdaptiveExtensionClassCode æ–¹æ³•å‘¢ï¼Ÿâ€”â€”â€”â€”æ˜¯å› ä¸ºExtensionFactoryçš„å®ç°ç±» AdaptiveExtensionFactory è¢« @Adaptive æ ‡æ³¨å•¦ã€‚</p><p>å› ä¸ºå…¶è¢«@Adaptiveæ ‡æ³¨ï¼Œåœ¨è·å–æ‰€æœ‰çš„æ‹“å±•ç±»getExtensionClassesé€»è¾‘ä¸­ä¼šèµ‹å€¼cachedAdaptiveClassæˆå‘˜å˜é‡ã€‚å…·ä½“çš„èµ‹å€¼é€»è¾‘åœ¨loadClassæ–¹æ³•ä¸­ã€‚</p><p>æˆ‘ä»¬å›å¤´çœ‹ä¸€ä¸‹åœ¨æ²¡æœ‰å®ç°ç±»è¢«@Adaptiveæ ‡æ³¨çš„æƒ…å†µä¸‹ï¼ŒDubboæ˜¯æ€åšè‡ªé€‚åº”æ‰©å±•çš„ï¼Ÿ</p><p>ä¸‹é¢å†é‡æ¸©è¿™æ®µä»£ç å§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1. è°ƒç”¨ getAdaptiveExtensionClass æ–¹æ³•è·å–è‡ªé€‚åº”æ‹“å±• Class å¯¹è±¡</span></span><br><span class="line"><span class="comment"> * 2. é€šè¿‡åå°„è¿›è¡Œå®ä¾‹åŒ–</span></span><br><span class="line"><span class="comment"> * 3. è°ƒç”¨ injectExtension æ–¹æ³•å‘æ‹“å±•å®ä¾‹ä¸­æ³¨å…¥ä¾èµ–</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</span><br><span class="line"><span class="function"><span class="keyword">private</span> T <span class="title">createAdaptiveExtension</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> injectExtension((T) getAdaptiveExtensionClass().newInstance());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"Can not create adaptive extension "</span> + type + <span class="string">", cause: "</span> + e.getMessage(), e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1. è°ƒç”¨ getExtensionClasses è·å–æ‰€æœ‰çš„æ‹“å±•ç±»</span></span><br><span class="line"><span class="comment"> * 2. æ£€æŸ¥ç¼“å­˜ï¼Œè‹¥ç¼“å­˜ä¸ä¸ºç©ºï¼Œåˆ™è¿”å›ç¼“å­˜</span></span><br><span class="line"><span class="comment"> * 3. è‹¥ç¼“å­˜ä¸ºç©ºï¼Œåˆ™è°ƒç”¨ createAdaptiveExtensionClass åˆ›å»ºè‡ªé€‚åº”æ‹“å±•ç±»</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * é¦–å…ˆä»ç¬¬ä¸€ä¸ªé€»è¾‘è¯´èµ·ï¼ŒgetExtensionClasses è¿™ä¸ªæ–¹æ³•ç”¨äºè·å–æŸä¸ªæ¥å£çš„æ‰€æœ‰å®ç°ç±»ã€‚æ¯”å¦‚è¯¥æ–¹æ³•å¯ä»¥è·å–</span></span><br><span class="line"><span class="comment"> * Protocol æ¥å£çš„ DubboProtocolã€HttpProtocolã€InjvmProtocol ç­‰å®ç°ç±»ã€‚åœ¨è·å–å®ç°ç±»çš„è¿‡ç¨‹ä¸­ï¼Œ</span></span><br><span class="line"><span class="comment"> * å¦‚æœæŸä¸ªå®ç°ç±»è¢« Adaptive æ³¨è§£ä¿®é¥°äº†ï¼Œé‚£ä¹ˆè¯¥ç±»å°±ä¼šè¢«èµ‹å€¼ç»™ cachedAdaptiveClass å˜é‡ã€‚æ­¤æ—¶ï¼Œä¸Šé¢æ­¥</span></span><br><span class="line"><span class="comment"> * éª¤ä¸­çš„ç¬¬äºŒæ­¥æ¡ä»¶æˆç«‹ï¼ˆç¼“å­˜ä¸ä¸ºç©ºï¼‰ï¼Œç›´æ¥è¿”å› cachedAdaptiveClass å³å¯ã€‚å¦‚æœæ‰€æœ‰çš„å®ç°ç±»å‡æœªè¢«</span></span><br><span class="line"><span class="comment"> * Adaptive æ³¨è§£ä¿®é¥°ï¼Œé‚£ä¹ˆæ‰§è¡Œç¬¬ä¸‰æ­¥é€»è¾‘ï¼Œåˆ›å»ºè‡ªé€‚åº”æ‹“å±•ç±»ã€‚</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> Class&lt;?&gt; getAdaptiveExtensionClass() &#123;</span><br><span class="line">    <span class="comment">// é€šè¿‡ SPI è·å–æ‰€æœ‰çš„æ‹“å±•ç±»</span></span><br><span class="line">    getExtensionClasses();</span><br><span class="line">    <span class="keyword">if</span> (cachedAdaptiveClass != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> cachedAdaptiveClass;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ›å»ºè‡ªé€‚åº”æ‹“å±•ç±»</span></span><br><span class="line">    <span class="keyword">return</span> cachedAdaptiveClass = createAdaptiveExtensionClass();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Class&lt;?&gt; createAdaptiveExtensionClass() &#123;</span><br><span class="line">    <span class="comment">// æ„å»ºè‡ªé€‚åº”æ‹“å±•ä»£ç </span></span><br><span class="line">    String code = createAdaptiveExtensionClassCode();</span><br><span class="line">    ClassLoader classLoader = findClassLoader();</span><br><span class="line">    <span class="comment">// è·å–ç¼–è¯‘å™¨å®ç°ç±»</span></span><br><span class="line">    com.alibaba.dubbo.common.compiler.Compiler compiler = ExtensionLoader.getExtensionLoader(com.alibaba.dubbo.common.compiler.Compiler<span class="class">.<span class="keyword">class</span>).<span class="title">getAdaptiveExtension</span>()</span>;</span><br><span class="line">    <span class="comment">// ç¼–è¯‘ä»£ç ï¼Œç”Ÿæˆ Class</span></span><br><span class="line">    <span class="keyword">return</span> compiler.compile(code, classLoader);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å…¶å®å¾ˆç®€å•  æ‰¾ä¸ªæ¡ˆä¾‹è·‘ä¸€ä¸‹   æ¯”å¦‚ com.alibaba.dubbo.remoting.Transporter  æˆ–è€…  com.alibaba.dubbo.rpc.Protocol</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * é»˜è®¤ç”Ÿæˆä¸€ä¸ªä»£ç†ç±»çš„å­—ç¬¦ä¸²ç¼–ç  &#123;name&#125;$Adaptive</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">createAdaptiveExtensionClassCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">   <span class="comment">//...çœç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡createAdaptiveExtensionClassCodeåˆ›å»ºå®ç°ç±»çš„ä»£ç å¦‚ä¸‹ï¼Œä¸ºäº†æ–¹ä¾¿é˜…è¯»æŠŠå…¨ç±»åä¿®æ”¹æˆç®€å•çš„ç±»åã€‚å¯ä»¥æ–­ç‚¹åˆ°createAdaptiveExtensionClassä¸­æŸ¥çœ‹codeå˜é‡å€¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.alibaba.dubbo.common.extensionloader.ext6_inject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.dubbo.common.extension.ExtensionLoader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Ext6</span>$<span class="title">Adaptive</span> <span class="keyword">implements</span> <span class="title">Ext6</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> java.lang.<span class="function">String <span class="title">echo</span><span class="params">(URL arg0, java.lang.String arg1)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (arg0 == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"url == null"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        URL url = arg0;</span><br><span class="line">        String extName = url.getParameter(<span class="string">"ext6"</span>);</span><br><span class="line">        <span class="keyword">if</span>(extName == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"Fail to get extension(Ext6) name from url("</span></span><br><span class="line">                    + url.toString() + <span class="string">") use keys([ext6])"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        Ext6 extension = ExtensionLoader.getExtensionLoader(Ext6<span class="class">.<span class="keyword">class</span>).<span class="title">getExtension</span>(<span class="title">extName</span>)</span>;</span><br><span class="line">        <span class="keyword">return</span> extension.echo(arg0, arg1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡codeå€¼å°±èƒ½å¤§ä½“çœ‹å‡ºæ¥createAdaptiveExtensionClassCodeæ–¹æ³•åšäº†å•¥äº‹ã€‚è€Œåå¯¹è¿™ä¸ªExt6$Adaptiveç±»åŠ è½½å®ä¾‹åŒ–èµ‹å€¼ç»™æµ‹è¯•ä»£ç ç¬¬5è¡Œçš„extå˜é‡ã€‚ç´§æ¥ç€èµ°åˆ°ç¬¬10è¡Œï¼Œæ‰§è¡Œextçš„echo()ã€‚è‡ªé€‚åº”åŠ è½½è¿‡ç¨‹ä¸­ï¼Œé…ç½®ä¿¡æ¯å…¨éƒ¨æ”¾åœ¨urlä¸­ï¼Œé€šè¿‡urlå˜é‡è¿›è¡Œæ§åˆ¶ã€‚å…¶å®çœŸå®æ‰§è¡Œçš„å®ç°ç±»çš„ä¸‹é¢è¿™å¥ä»£ç ï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Ext6 extension = ExtensionLoader.getExtensionLoader(Ext6.class).getExtension(url.getParameter("ext6"));</span><br></pre></td></tr></table></figure><p>å› ä¸ºæˆ‘ä»¬urlä¸­â€ext6â€çš„å‚æ•°å€¼â€impl1â€ï¼Œæ‰€ä»¥å…¶å®å®ç°ç±»å°±æ˜¯com.alibaba.dubbo.common.extensionloader.ext6_inject.impl.Ext6Impl1ã€‚åœ¨åˆ›å»ºçš„è¿‡ç¨‹ä¸­éœ€è¦è°ƒç”¨ injectExtension æ–¹æ³•å‘æ‹“å±•å®ä¾‹ä¸­æ³¨å…¥ä¾èµ–ï¼Œçœ‹ä¸€ä¸‹ Ext6Impl1 çš„å®šä¹‰ï¼Œå­˜åœ¨ setExt1 å’Œ setDao ä¸¤ä¸ªæ–¹æ³•ã€‚æ³¨å…¥çš„ä¸»è¦å®ç°é€šè¿‡objectFactory.getExtension(pt, property) ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; com.alibaba.dubbo.common.extension.ExtensionLoader#injectExtension</span><br><span class="line"></span><br><span class="line">Class&lt;?&gt; pt &#x3D; method.getParameterTypes()[0];</span><br><span class="line">try &#123;</span><br><span class="line">    String property &#x3D; method.getName().length() &gt; 3 ?</span><br><span class="line">            method.getName().substring(3, 4).toLowerCase() + method.getName().substring(4) : &quot;&quot;;</span><br><span class="line">    Object object &#x3D; objectFactory.getExtension(pt, property);è¿›è¡Œæ³¨å…¥ï¼Œ</span><br><span class="line">    if (object !&#x3D; null) &#123;</span><br><span class="line">        method.invoke(instance, object);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; catch (Exception e) &#123;</span><br><span class="line">    logger.error(&quot;fail to inject via method &quot; + method.getName()</span><br><span class="line">            + &quot; of interface &quot; + type.getName() + &quot;: &quot; + e.getMessage(), e);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>objectFactoryé»˜è®¤å®ç°æ˜¯AdaptiveExtensionFactoryï¼Œä½†æ˜¯é€šè¿‡å…¶æˆå‘˜å˜é‡factoriesä¾æ¬¡è¿›è¡ŒåŠ è½½ï¼Œé»˜è®¤æ˜¯SpiExtensionFactoryåŠ è½½è¢«@SPIæ³¨è§£ä¿®æ”¹çš„ç±»å‹ã€‚æ‰€ä»¥Ext6Impl1ä¸­çš„æˆå‘˜å˜é‡SimpleExt ext1ä¼šè¢«åŠ è½½ã€‚</p><p>åŠ è½½çš„æ—¶å€™å› ä¸º SimpleExt çš„å®ç°ç±»éƒ½æ²¡æœ‰å¸¦æœ‰ @Adaptive æ³¨è§£ï¼Œæ‰€ä»¥åƒ Ext6$Adaptive å½¢å¼åŠ è½½ã€‚<br>ä½†æ˜¯å› ä¸º SimpleExt æ¥å£å®šä¹‰çš„æ—¶å€™æ–¹æ³•ä½¿ç”¨ @Adaptiveï¼Œæ‰€ä»¥ç”Ÿæˆçš„ä»£ç é€»è¾‘æ¯” Ext6$Adaptive å¤æ‚ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SPI</span>(<span class="string">"impl1"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SimpleExt</span> </span>&#123;</span><br><span class="line">    <span class="comment">// @Adaptive example, do not specify a explicit key.</span></span><br><span class="line">    <span class="meta">@Adaptive</span></span><br><span class="line">    <span class="function">String <span class="title">echo</span><span class="params">(URL url, String s)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Adaptive</span>(&#123;<span class="string">"key1"</span>, <span class="string">"key2"</span>&#125;)</span><br><span class="line">    <span class="function">String <span class="title">yell</span><span class="params">(URL url, String s)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// no @Adaptive</span></span><br><span class="line">    <span class="function">String <span class="title">bang</span><span class="params">(URL url, <span class="keyword">int</span> i)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.alibaba.dubbo.common.extensionloader.ext1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.dubbo.common.extension.ExtensionLoader;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleExt</span>$<span class="title">Adaptive</span> <span class="keyword">implements</span> <span class="title">SimpleExt</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">echo</span><span class="params">(URL arg0, String arg1)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (arg0 == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"url == null"</span>);</span><br><span class="line">        URL url = arg0;</span><br><span class="line">        String extName = url.getParameter(<span class="string">"simple.ext"</span>, <span class="string">"impl1"</span>);</span><br><span class="line">        <span class="keyword">if</span> (extName == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"Fail to get extension(SimpleExt) name from url("</span></span><br><span class="line">                    + url.toString() + <span class="string">") use keys([simple.ext])"</span>);</span><br><span class="line">        SimpleExt extension = (SimpleExt) ExtensionLoader.getExtensionLoader(SimpleExt<span class="class">.<span class="keyword">class</span>).<span class="title">getExtension</span>(<span class="title">extName</span>)</span>;</span><br><span class="line">        <span class="keyword">return</span> extension.echo(arg0, arg1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">yell</span><span class="params">(URL arg0, String arg1)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (arg0 == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"url == null"</span>);</span><br><span class="line">        URL url = arg0;</span><br><span class="line">        String extName = url.getParameter(<span class="string">"key1"</span>, url.getParameter(<span class="string">"key2"</span>, <span class="string">"impl1"</span>));</span><br><span class="line">        <span class="keyword">if</span> (extName == <span class="keyword">null</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"Fail to get extension(SimpleExt) name from url("</span></span><br><span class="line">                    + url.toString() + <span class="string">") use keys([key1, key2])"</span>);</span><br><span class="line">        SimpleExt extension = (SimpleExt) ExtensionLoader.getExtensionLoader(SimpleExt<span class="class">.<span class="keyword">class</span>).<span class="title">getExtension</span>(<span class="title">extName</span>)</span>;</span><br><span class="line">        <span class="keyword">return</span> extension.yell(arg0, arg1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">bang</span><span class="params">(URL arg0, <span class="keyword">int</span> arg1)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException(<span class="string">"method public abstract String SimpleExt.bang(URL,int) of interface SimpleExt is not adaptive method!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ç°å¸¦æœ‰åˆ¶å®šçš„é»˜è®¤å€¼ï¼Œå‚æ•°çš„è®¾ç½®ä¹Ÿæ˜¯æœ‰è§„åˆ™çš„ï¼Œæ‰€ä»¥å»ºè®®é˜…è¯» createAdaptiveExtensionClassCode æ–¹æ³•ï¼Œé˜…è¯»çš„æ—¶å€™å‚è€ƒå¼€å¤´æ¨èçš„å®˜ç½‘æºç å°±å¾ˆç®€å•ã€‚</p><p>æœ€åæ„é€ å¥½å®ä¾‹æ‰§è¡Œ echo æ–¹æ³•ã€‚</p><p>è¿™é‡Œå°±å¯ä»¥çœ‹å‡ºæ¥URLçš„ä½œç”¨ï¼Œç›¸å½“äºæ•°æ®æ€»çº¿ï¼Œé€šè¿‡å…¶ç»‘å®šé…ç½®ä¿¡æ¯</p><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><ul><li><input disabled="" type="checkbox"> åæœŸè¡¥ä¸Š <strong>ç›®çš„</strong> <strong>å¦‚ä½•è®¾è®¡</strong> <strong>å¦‚ä½•å®ç°</strong> <strong>ä¼˜ç¼ºç‚¹</strong></li></ul><p>ç†Ÿæ‚‰ ExtensionLoader.getExtensionLoader(type) è¿™ç§ä¿„ç½—æ–¯å¥—å¨ƒå¼çš„åŠ è½½ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;http://dubbo.apache.org/zh/docs/v2.7/dev/source/adaptive-extension/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;å®˜æ–¹æ–‡æ¡£-SPI è‡ªé€‚åº”æ‹“å±•&lt;/a&gt;&lt;/p&gt;
&lt;bloc
      
    
    </summary>
    
    
    
      <category term="æºç é˜…è¯»" scheme="http://bannong.wang/tags/%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/"/>
    
      <category term="Dubbo" scheme="http://bannong.wang/tags/Dubbo/"/>
    
  </entry>
  
  <entry>
    <title>ä¸ªäººåšå®¢æ­å»º</title>
    <link href="http://bannong.wang/2020/06/18/Blog/"/>
    <id>http://bannong.wang/2020/06/18/Blog/</id>
    <published>2020-06-18T08:31:44.753Z</published>
    <updated>2020-12-03T13:44:37.006Z</updated>
    
    <content type="html"><![CDATA[<p>ğŸ“°æœ¬åšå®¢é‡‡ç”¨<a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>ï¼Œèµ„æºç›´æ¥æ‰˜ç®¡åœ¨<a href="https://github.com/" target="_blank" rel="noopener">Github</a>ã€‚<br>âš™ï¸å…³äºå¦‚æœæ“ä½œï¼ŒHexoå·²ç»æä¾›æ–‡æ¡£ï¼Œè‡ªå·±æœç´¢ğŸ”ä¹Ÿè¡Œï¼Œè¿™é¢æ¨ècofessä¸»é¢˜ä½œè€…çš„<a href="https://blog.cofess.com/2017/04/09/hexo-builds-a-personal-blog-and-deploys-to-github.html" target="_blank" rel="noopener">ä¸€ç¯‡æ–‡ç« </a>ã€‚</p><h3 id="å¤‡å¿˜å…³é”®æ“ä½œ"><a href="#å¤‡å¿˜å…³é”®æ“ä½œ" class="headerlink" title="å¤‡å¿˜å…³é”®æ“ä½œ"></a>å¤‡å¿˜å…³é”®æ“ä½œ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hexo new "æˆ‘çš„åšå®¢"</span></span><br><span class="line">$ hexo n <span class="string">"æˆ‘çš„åšå®¢"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># clean</span></span><br><span class="line">$ hexo clean</span><br><span class="line"></span><br><span class="line"><span class="comment"># hexo generate ç”Ÿæˆé™æ€é¡µé¢</span></span><br><span class="line">$ hexo g</span><br><span class="line"></span><br><span class="line"><span class="comment"># hexo server å¯åŠ¨æœåŠ¡é¢„è§ˆ</span></span><br><span class="line">$ hexo s</span><br><span class="line"></span><br><span class="line"><span class="comment"># hexo deploy éƒ¨ç½²</span></span><br><span class="line">$ hexo d</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ğŸ“°æœ¬åšå®¢é‡‡ç”¨&lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;ï¼Œèµ„æºç›´æ¥æ‰˜ç®¡åœ¨&lt;a href=&quot;https://github.com/&quot; target=&quot;_blank&quot; rel=&quot;noope
      
    
    </summary>
    
    
    
  </entry>
  
</feed>
